<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Libaco Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Libaco Blog Atom Feed"><title data-react-helmet="true">Tutorials | Libaco</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tutorials | Libaco"><meta data-react-helmet="true" name="description" content="The testacotutorial0.c in the repository shows the basic usage of libaco. There is only one main co and one standalone non-main co in this tutorial. The comments in the source code is also very helpful."><meta data-react-helmet="true" property="og:description" content="The testacotutorial0.c in the repository shows the basic usage of libaco. There is only one main co and one standalone non-main co in this tutorial. The comments in the source code is also very helpful."><meta data-react-helmet="true" property="og:url" content="https://libaco.org/docs/tutorials"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://libaco.org/docs/tutorials"><link rel="stylesheet" href="/styles.5d9da03c.css">
<link rel="preload" href="/styles.6dbbae18.js" as="script">
<link rel="preload" href="/runtime~main.f9a24c82.js" as="script">
<link rel="preload" href="/main.c86e2477.js" as="script">
<link rel="preload" href="/1.c40176d6.js" as="script">
<link rel="preload" href="/17.ab430a67.js" as="script">
<link rel="preload" href="/19.c9d47d84.js" as="script">
<link rel="preload" href="/935f2afb.6fe096db.js" as="script">
<link rel="preload" href="/16.0ad8f537.js" as="script">
<link rel="preload" href="/4db8806d.03303c37.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/libaco_logo_blue.svg" alt="libaco" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/libaco_logo_white.svg" alt="libaco" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/support">Support</a><a href="https://github.com/hnes/libaco" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/libaco_logo_blue.svg" alt="libaco" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/libaco_logo_white.svg" alt="libaco" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/support">Support</a></li><li class="menu__list-item"><a href="https://github.com/hnes/libaco" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/description">Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/build-and-test">Build and test</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tutorials">Tutorials</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/best-practice">Best practice</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Changelog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/benchmark">Benchmark</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/proof-of-correctness">Proof of Correctness</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Tutorials</h1></header><div class="markdown"><p>The <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_0.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_0.c</a> in the <a href="https://github.com/hnes/libaco" target="_blank" rel="noopener noreferrer">repository</a> shows the basic usage of libaco. There is only one main co and one standalone non-main co in this tutorial. The comments in the source code is also very helpful.</p><p>The <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_1.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_1.c</a> shows the usage of some statistics of non-main co. The data structure of <code>aco_t</code> is very clear and is defined in <code>aco.h</code>.</p><p>There are one main co, one standalone non-main co and two non-main co (pointing to the same share stack) in <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_2.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_2.c</a>.</p><p>The <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_3.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_3.c</a> shows how to use libaco in a multithreaded process. Basically, one instance of libaco is designed only to work inside one certain thread to gain the maximum performance of context switching between coroutines. If you want to use libaco in multithreaded environment, simply to create one instance of libaco in each of the threads. There is no data-sharing across threads inside the libaco, and you have to deal with the data competition among multiple threads yourself (like what <code>gl_race_aco_yield_ct</code> does in this tutorial).</p><p>One of the rules in libaco is to call <code>aco_exit()</code> to terminate the execution of the non-main co instead of the default direct C style <code>return</code>, otherwise libaco will treat such behaviour as illegal and trigger the default protector whose job is to log the error information about the offending co to stderr and abort the process immediately. The <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_4.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_4.c</a> shows such &quot;offending co&quot; situation.</p><p>You could also define your own protector to substitute the default one (to do some customized &quot;last words&quot; stuff). But no matter in what case, the process will be aborted after the protector was executed. The <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_5.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_5.c</a> shows how to define the customized last word function.</p><p>The last example is a simple coroutine scheduler in <a href="https://github.com/hnes/libaco/blob/master/test_aco_tutorial_6.c" target="_blank" rel="noopener noreferrer">test_aco_tutorial_6.c</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/libaco/libaco.github.io/edit/main/docs/tutorials.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/build-and-test"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Build and test</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 <a href="https://github.com/libaco/" target="_blank">libaco</a>. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.6dbbae18.js"></script>
<script src="/runtime~main.f9a24c82.js"></script>
<script src="/main.c86e2477.js"></script>
<script src="/1.c40176d6.js"></script>
<script src="/17.ab430a67.js"></script>
<script src="/19.c9d47d84.js"></script>
<script src="/935f2afb.6fe096db.js"></script>
<script src="/16.0ad8f537.js"></script>
<script src="/4db8806d.03303c37.js"></script>
</body>
</html>