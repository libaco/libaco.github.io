<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="https://libaco.org/blog/rss.xml" title="Libaco Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="https://libaco.org/blog/atom.xml" title="Libaco Blog Atom Feed"><title data-react-helmet="true">Benchmark | Libaco</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Benchmark | Libaco"><meta data-react-helmet="true" name="description" content="Date: Sat Jun 30 UTC 2018."><meta data-react-helmet="true" property="og:description" content="Date: Sat Jun 30 UTC 2018."><meta data-react-helmet="true" property="og:url" content="https://libaco.orghttps://libaco.org/docs/benchmark"><link data-react-helmet="true" rel="shortcut icon" href="https://libaco.org/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://libaco.orghttps://libaco.org/docs/benchmark"><link rel="stylesheet" href="https://libaco.org/styles.3751d533.css">
<link rel="preload" href="https://libaco.org/styles.6dbbae18.js" as="script">
<link rel="preload" href="https://libaco.org/runtime~main.131eb803.js" as="script">
<link rel="preload" href="https://libaco.org/main.0e59d631.js" as="script">
<link rel="preload" href="https://libaco.org/1.c40176d6.js" as="script">
<link rel="preload" href="https://libaco.org/17.ab430a67.js" as="script">
<link rel="preload" href="https://libaco.org/19.c9d47d84.js" as="script">
<link rel="preload" href="https://libaco.org/935f2afb.342755c7.js" as="script">
<link rel="preload" href="https://libaco.org/16.0ad8f537.js" as="script">
<link rel="preload" href="https://libaco.org/9d965dc0.95b3bd81.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://libaco.org/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><strong class="navbar__title">libaco</strong></a><a href="https://libaco.org/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Documentation</a><a href="https://libaco.org/support" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support</a><a href="https://github.com/hnes/libaco" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://libaco.org/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><strong class="navbar__title">libaco</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://libaco.org/docs" target="_blank" rel="noopener noreferrer" class="menu__link">Documentation</a></li><li class="menu__list-item"><a href="https://libaco.org/support" target="_blank" rel="noopener noreferrer" class="menu__link">Support</a></li><li class="menu__list-item"><a href="https://github.com/hnes/libaco" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a href="https://libaco.org/docs/" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Introduction</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/description" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Description</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/build-and-test" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Build and test</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/tutorials" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Tutorials</a></li></ul></li><li class="menu__list-item"><a href="https://libaco.org/docs/api" target="_blank" rel="noreferrer noopener" class="menu__link">API</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/best-practice" target="_blank" rel="noreferrer noopener" class="menu__link">Best practice</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/changelog" target="_blank" rel="noreferrer noopener" class="menu__link">Changelog</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/benchmark" target="_blank" rel="noreferrer noopener" class="menu__link menu__link--active">Benchmark</a></li><li class="menu__list-item"><a href="https://libaco.org/docs/proof-of-correctness" target="_blank" rel="noreferrer noopener" class="menu__link">Proof of Correctness</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Benchmark</h1></header><div class="markdown"><p>Date: Sat Jun 30 UTC 2018.</p><p>Machine: <a href="https://aws.amazon.com/cn/blogs/aws/now-available-compute-intensive-c5-instances-for-amazon-ec2/" target="_blank" rel="noopener noreferrer">c5d.large on AWS</a>.</p><p>OS: RHEL-7.5 (Red Hat Enterprise Linux 7.5).</p><p>Here is a brief summary of the benchmark part:</p><ul><li>One time of the context switching between coroutines takes only about <strong>10.29 ns</strong> (in the case of standalone stack, where x87 and mxcsr control words are shared between coroutines);</li><li>One time of the context switching between coroutines takes only about <strong>10.38 ns</strong> (in the case of standalone stack, where each coroutine maintains their own x87 and mxcsr control words);</li><li>It is extremely memory efficient: it only costs <strong>2.8 GB</strong> of physical memory to run <strong>10,000,000</strong> coroutines simultaneously (with tcmalloc, where each coroutine has a <strong>120 bytes</strong> copy-stack size configuration).</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ LD_PRELOAD=/usr/lib64/libtcmalloc_minimal.so.4 ./test_aco_benchmark..no_valgrind.shareFPUenv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:x86_64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:-DACO_CONFIG_SHARE_FPU_MXCSR_ENV</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:share fpu &amp; mxcsr control words between coroutines</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:undefined ACO_USE_VALGRIND</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:without valgrind memcheck friendly support</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof(aco_t)=152:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">comment                                             task_amount  all_time_cost   ns_per_op          speed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                              1     0.000 s      230.00 ns/op    4347824.79 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1/copy_stack_size=0B             20000000     0.412 s       20.59 ns/op   48576413.55 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -&gt; acosw                                            40000000     0.412 s       10.29 ns/op   97152827.10 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                                  1     0.000 s      650.00 ns/op    1538461.66 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                              1     0.000 s      200.00 ns/op    5000001.72 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1/copy_stack_size=0B             20000000     0.412 s       20.61 ns/op   48525164.25 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -&gt; acosw                                            40000000     0.412 s       10.30 ns/op   97050328.50 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                                  1     0.000 s      666.00 ns/op    1501501.49 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.50 ns/op   15266771.53 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=8B       20000000     0.666 s       33.29 ns/op   30043022.64 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.066 s       32.87 ns/op   30425152.25 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.130 s       65.22 ns/op   15332218.24 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=24B      20000000     0.675 s       33.75 ns/op   29630018.73 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.067 s       33.45 ns/op   29898311.36 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.42 ns/op   15286937.97 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=40B      20000000     0.669 s       33.45 ns/op   29891277.59 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.080 s       39.87 ns/op   25084242.29 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.224 s      111.86 ns/op    8940010.49 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=56B      20000000     0.678 s       33.88 ns/op   29515473.53 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.067 s       33.42 ns/op   29922412.68 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.74 ns/op   15211896.70 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=120B     20000000     0.769 s       38.45 ns/op   26010724.94 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.088 s       44.11 ns/op   22669240.25 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     1.240 s      123.97 ns/op    8066542.54 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=8B      40000000     1.327 s       33.17 ns/op   30143409.55 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.328 s       32.82 ns/op   30467658.05 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.659 s       65.94 ns/op   15165717.02 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=24B     40000000     1.345 s       33.63 ns/op   29737708.53 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.337 s       33.71 ns/op   29666697.09 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.654 s       65.38 ns/op   15296191.35 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=40B     40000000     1.348 s       33.71 ns/op   29663992.77 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.336 s       33.56 ns/op   29794574.96 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.653 s       65.29 ns/op   15316087.09 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=56B     40000000     1.384 s       34.60 ns/op   28902221.24 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.337 s       33.73 ns/op   29643682.93 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.652 s       65.19 ns/op   15340872.40 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=120B    40000000     1.565 s       39.11 ns/op   25566255.73 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.443 s       44.30 ns/op   22574242.55 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.61 ns/op   15241722.94 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=136B     20000000     0.947 s       47.36 ns/op   21114212.05 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.125 s       62.35 ns/op   16039466.45 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.71 ns/op   15218784.72 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=136B     20000000     0.948 s       47.39 ns/op   21101216.29 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.125 s       62.73 ns/op   15941559.26 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.49 ns/op   15270258.18 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=152B     20000000     1.069 s       53.44 ns/op   18714275.17 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.122 s       61.05 ns/op   16378678.85 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.132 s       65.91 ns/op   15171336.62 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=232B     20000000     1.190 s       59.48 ns/op   16813230.99 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.123 s       61.26 ns/op   16324298.25 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.68 ns/op   15224361.30 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=488B     20000000     1.828 s       91.40 ns/op   10941133.56 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.145 s       72.56 ns/op   13781182.82 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.132 s       65.80 ns/op   15197461.34 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=488B     20000000     1.829 s       91.47 ns/op   10932139.32 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.149 s       74.70 ns/op   13387258.82 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        1000000     0.067 s       66.63 ns/op   15007426.35 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1000000/copy_stack_size=1000B    20000000     4.224 s      211.20 ns/op    4734744.76 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            1000000     0.093 s       93.36 ns/op   10711651.49 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        1000000     0.066 s       66.28 ns/op   15086953.73 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1000000/copy_stack_size=1000B    20000000     4.222 s      211.12 ns/op    4736537.93 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            1000000     0.094 s       94.09 ns/op   10627664.78 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       70.72 ns/op   14139923.59 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=1000B     20000000     4.191 s      209.56 ns/op    4771909.70 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.010 s      101.21 ns/op    9880747.28 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       66.62 ns/op   15010433.00 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=2024B     20000000     7.002 s      350.11 ns/op    2856228.03 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.016 s      159.69 ns/op    6262129.35 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       65.76 ns/op   15205994.08 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=4072B     20000000    11.918 s      595.90 ns/op    1678127.54 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.019 s      186.32 ns/op    5367189.85 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.006 s       63.03 ns/op   15865531.37 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=7992B     20000000    21.808 s     1090.42 ns/op     917079.11 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.038 s      378.33 ns/op    2643225.42 op/s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ LD_PRELOAD=/usr/lib64/libtcmalloc_minimal.so.4 ./test_aco_benchmark..no_valgrind.standaloneFPUenv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:x86_64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:undefined ACO_CONFIG_SHARE_FPU_MXCSR_ENV</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:each coroutine maintain each own fpu &amp; mxcsr control words</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:undefined ACO_USE_VALGRIND</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+build:without valgrind memcheck friendly support</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof(aco_t)=160:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">comment                                             task_amount  all_time_cost   ns_per_op          speed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                              1     0.000 s      273.00 ns/op    3663004.27 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1/copy_stack_size=0B             20000000     0.415 s       20.76 ns/op   48173877.75 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -&gt; acosw                                            40000000     0.415 s       10.38 ns/op   96347755.51 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                                  1     0.000 s      381.00 ns/op    2624672.26 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                              1     0.000 s      212.00 ns/op    4716980.43 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1/copy_stack_size=0B             20000000     0.415 s       20.75 ns/op   48185455.26 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -&gt; acosw                                            40000000     0.415 s       10.38 ns/op   96370910.51 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                                  1     0.000 s      174.00 ns/op    5747123.38 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.63 ns/op   15237386.02 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=8B       20000000     0.664 s       33.20 ns/op   30119155.82 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.065 s       32.67 ns/op   30604542.55 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.33 ns/op   15305975.29 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=24B      20000000     0.675 s       33.74 ns/op   29638360.61 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.067 s       33.31 ns/op   30016633.42 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.61 ns/op   15241767.78 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=40B      20000000     0.678 s       33.88 ns/op   29518648.08 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.079 s       39.74 ns/op   25163018.30 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.221 s      110.73 ns/op    9030660.30 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=56B      20000000     0.684 s       34.18 ns/op   29253416.65 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.067 s       33.40 ns/op   29938840.64 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.60 ns/op   15244077.65 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=120B     20000000     0.769 s       38.43 ns/op   26021228.41 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.087 s       43.74 ns/op   22863987.42 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     1.251 s      125.08 ns/op    7994958.59 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=8B      40000000     1.327 s       33.19 ns/op   30133654.80 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.329 s       32.85 ns/op   30439787.32 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.674 s       67.37 ns/op   14843796.57 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=24B     40000000     1.354 s       33.84 ns/op   29548523.05 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.339 s       33.90 ns/op   29494634.83 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.672 s       67.19 ns/op   14882262.88 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=40B     40000000     1.361 s       34.02 ns/op   29393520.19 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.338 s       33.77 ns/op   29609577.59 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.673 s       67.31 ns/op   14857716.02 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=56B     40000000     1.371 s       34.27 ns/op   29181897.80 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.339 s       33.85 ns/op   29540633.63 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                       10000000     0.672 s       67.24 ns/op   14873017.10 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=10000000/copy_stack_size=120B    40000000     1.548 s       38.71 ns/op   25835542.17 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                           10000000     0.446 s       44.61 ns/op   22415961.64 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.132 s       66.01 ns/op   15148290.52 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=136B     20000000     0.944 s       47.22 ns/op   21177946.19 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.124 s       61.99 ns/op   16132721.97 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.133 s       66.36 ns/op   15068860.85 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=136B     20000000     0.944 s       47.20 ns/op   21187541.38 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.124 s       62.21 ns/op   16073322.25 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.131 s       65.62 ns/op   15238955.93 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=152B     20000000     1.072 s       53.61 ns/op   18652789.74 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.121 s       60.42 ns/op   16551368.04 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.132 s       66.08 ns/op   15132547.65 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=232B     20000000     1.198 s       59.88 ns/op   16699389.91 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.121 s       60.71 ns/op   16471465.52 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.133 s       66.50 ns/op   15036985.95 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=488B     20000000     1.853 s       92.63 ns/op   10796126.04 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.146 s       72.87 ns/op   13723559.36 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        2000000     0.132 s       66.14 ns/op   15118324.13 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=2000000/copy_stack_size=488B     20000000     1.855 s       92.75 ns/op   10781572.22 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            2000000     0.152 s       75.79 ns/op   13194130.51 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        1000000     0.067 s       66.97 ns/op   14931921.56 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1000000/copy_stack_size=1000B    20000000     4.218 s      210.90 ns/op    4741536.66 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            1000000     0.093 s       93.16 ns/op   10734691.98 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                        1000000     0.066 s       66.49 ns/op   15039274.31 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=1000000/copy_stack_size=1000B    20000000     4.216 s      210.81 ns/op    4743543.53 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                            1000000     0.094 s       93.97 ns/op   10641539.58 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       70.95 ns/op   14094724.73 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=1000B     20000000     4.190 s      209.52 ns/op    4772746.50 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.010 s      100.99 ns/op    9902271.51 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       66.49 ns/op   15040038.84 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=2024B     20000000     7.028 s      351.38 ns/op    2845942.55 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.016 s      159.15 ns/op    6283444.42 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.007 s       65.73 ns/op   15214482.36 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=4072B     20000000    11.879 s      593.95 ns/op    1683636.60 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.018 s      184.23 ns/op    5428119.00 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_create/init_save_stk_sz=64B                         100000     0.006 s       63.41 ns/op   15771072.16 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_resume/co_amount=100000/copy_stack_size=7992B     20000000    21.808 s     1090.42 ns/op     917081.56 op/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aco_destroy                                             100000     0.038 s      376.78 ns/op    2654073.13 op/s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/libaco/libaco.github.io/edit/master/docs/benchmark.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a href="https://libaco.org/docs/changelog" target="_blank" rel="noopener noreferrer" class="pagination-nav__link"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Changelog</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a href="https://libaco.org/docs/proof-of-correctness" target="_blank" rel="noopener noreferrer" class="pagination-nav__link"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Proof of Correctness Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 <a href="https://github.com/libaco/" target="_blank">libaco</a>. Built with Docusaurus.</div></div></div></footer></div>
<script src="https://libaco.org/styles.6dbbae18.js"></script>
<script src="https://libaco.org/runtime~main.131eb803.js"></script>
<script src="https://libaco.org/main.0e59d631.js"></script>
<script src="https://libaco.org/1.c40176d6.js"></script>
<script src="https://libaco.org/17.ab430a67.js"></script>
<script src="https://libaco.org/19.c9d47d84.js"></script>
<script src="https://libaco.org/935f2afb.342755c7.js"></script>
<script src="https://libaco.org/16.0ad8f537.js"></script>
<script src="https://libaco.org/9d965dc0.95b3bd81.js"></script>
</body>
</html>